<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Shiv Bricks</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="./style.css">
  <!-- PWA manifest and theme color -->
  <link rel="manifest" href="./manifest.json">
  <meta name="theme-color" content="#0d6efd">
  
</head>
<body>
  <header class="bg-primary text-white py-3">
    <h1 class="text-center mb-0">Shiv Bricks</h1>
  </header>

  <main role="main" class="container my-4">
    <!-- Entry form -->
    <form id="entryForm" class="entryform" novalidate>
      <div class="col-12 col-md-3">
        <label for="deliveryDate" class="form-label">Delivery Date</label>
        <input type="date" class="form-control" id="deliveryDate" required>
      </div>
      <div class="col-12 col-md-3">
        <label for="place" class="form-label">Place</label>
        <input type="text" class="form-control" id="place" placeholder="Place" required>
      </div>
      <div class="col-12 col-md-3">
        <label for="party" class="form-label">Party</label>
        <input type="text" class="form-control" id="party" placeholder="Party" required>
      </div>
      <div class="col-12 col-md-3">
        <label for="area" class="form-label">Area</label>
        <input type="text" class="form-control" id="area" placeholder="Area" required>
      </div>
      <div class="col-12 col-md-3">
        <label for="purchase" class="form-label">Purchase</label>
        <input type="text" class="form-control" id="purchase" placeholder="purchase" required>
      </div>
      <div class="col-12 col-md-3">
        <label for="transporter" class="form-label">Transporter</label>
        <input type="text" class="form-control" id="transporter" placeholder="Transporter" required>
      </div>
      <div class="col-12 col-md-3">
        <label for="quantity" class="form-label">Quantity</label>
        <input type="text" class="form-control" id="quantity" placeholder="quantity" required>
      </div>
      
      <div class="col-12">
        <button type="submit" id="submitbutton" class="btn btn-success">Add Delivery Entry</button>
      </div>
    </form>
    
    <!-- Filters and Export Button -->
    <div class="row my-4">
      <div class="col-12 col-md-2">
        <label for="startDate" class="form-label">From Date</label>
        <input type="date" class="form-control" id="startDate" aria-label="Filter by date" placeholder="Start Date">
      </div>
      <div class="col-12 col-md-2">
        <label for="endDate" class="form-label">To Date</label>
        <input type="date" class="form-control" id="endDate" aria-label="Filter by date" placeholder="End Date">
      </div>
      <div class="col-12 col-md-2">
        <label for="filterPlace" class="form-label">Place</label>
        <input type="text" class="form-control" id="filterPlace" aria-label="Filter by place" placeholder="Place">
      </div>
      <div class="col-12 col-md-2">
        <label for="filterParty" class="form-label">Party</label>
        <input type="text" class="form-control" id="filterParty" aria-label="Filter by party" placeholder="Party">
      </div>
      <div class="col-12 col-md-2">
        <label for="filterArea" class="form-label">Area</label>
        <input type="text" class="form-control" id="filterArea" aria-label="Filter by area" placeholder="Area">
      </div>
      <div class="col-12 col-md-2">
        <label for="filtePurchase" class="form-label">Purchase</label>
        <input type="text" class="form-control" id="filterPurchase" aria-label="Filter by purchase" placeholder="Purchase">
      </div>
      <div class="col-12 col-md-2">
        <label for="filterTransporter" class="form-label">Transporter</label>
        <input type="text" class="form-control" id="filterTransporter" aria-label="Filter by transporter" placeholder="Transporter">
      </div>
      <div class="col-12 col-md-2">
        <label for="filterQuantity" class="form-label">Quantity</label>
        <input type="text" class="form-control" id="filterQuantity" aria-label="Filter by quantity" placeholder="Quantity">
      </div>
      <div class="col-12 col-md-4 text-end">
        <button id="filterButton" class="btn btn-primary" onclick="applyFilters()">Filter</button>
      </div>
    </div>

    <!-- Delivery entries table -->
    <div class="table-responsive">
      <table class="entrytable">
        <caption class="text-center">Delivery Entries</caption>
        <thead class="table-light">
          <tr>
            <th scope="col">No.</th>
            <th scope="col">Date</th>
            <th scope="col">Place</th>
            <th scope="col">Party</th>
            <th scope="col">Area</th>
            <th scope="col">Purchase</th>
            <th scope="col">Transporter</th>
            <th scope="col">Quantity</th>
            <th scope="col"><button id="print" class="print-btn" onclick="exportTableToPDF()">üñ®Ô∏è Print</button></th>
          </tr>
        </thead>
        <tbody id="entryTableBody">
          <!-- Entries will be dynamically added here -->
        </tbody>
      </table>
    </div>
  </main>

  <!-- Scripts -->
  <script src="script.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
  <!-- jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/3.0.1/jspdf.umd.min.js"></script>
  <!-- jsPDF AutoTable -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

  <script>
    // Register service worker for offline support (PWA)
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./service-worker.js')
          .then(reg => console.log('Service worker registered.', reg))
          .catch(err => console.error('Service worker registration failed:', err));
      });
    }
  </script>
</body>
</html>
